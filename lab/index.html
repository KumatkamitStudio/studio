<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Branding Previewer</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- React and Babel -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #05472A;
            color: #f8f8f8;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        .preview-scroll::-webkit-scrollbar {
            width: 0px;
        }
        .horizontal-container::-webkit-scrollbar {
            height: 4px;
        }
        .horizontal-container::-webkit-scrollbar-thumb {
            background: #05472A;
            border-radius: 10px;
        }
        .phone-frame {
            position: relative;
            width: 320px;
            height: 650px;
            background: #fff;
            border-radius: 44px;
            border: 12px #0A0A0A;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 40px rgba(5, 71, 42, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useCallback } = React;

        // --- Initial State ---
        const INITIAL_PROFILE = {
            username: 'kumatkamit.studio',
            fullName: 'Kumatkamit Studio',
            bio: 'Visual Identity | Design Strategy\nElevating brands through modern aesthetics.\n Jakarta, Indonesia',
            avatar: '/favicon .png',
            stats: { posts: '128', followers: '12.4K', following: '840' }
        };

        const INITIAL_POSTS = Array.from({ length: 9 }, (_, i) => ({
            id: i,
            imageUrl: `https://picsum.photos/seed/post${i}/600/800`,
            location: 'Studio, Jakarta',
            caption: 'Bringing vision to life with precision and style. #branding #design'
        }));

        // --- Sub-Components ---

        const ProfilePreview = ({ profile, posts, onAvatarChange, onPostClick, onPostChange, onUpdateProfile }) => (
            <div className="h-full flex flex-col bg-[#f8f8f8] text-slate-900 overflow-y-auto preview-scroll">
                {/* Header */}
                <div className="flex items-center justify-between px-4 py-3 border-b border-slate-200 sticky top-0 bg-[#f8f8f8] z-10">
                    <div className="w-8"></div>
                    <div className="font-bold text-xs tracking-tight flex items-center gap-1 cursor-pointer">
                        <span contentEditable suppressContentEditableWarning onBlur={(e) => onUpdateProfile('username', e.currentTarget.innerText)}>{profile.username}</span>
                        <i className="fa-solid fa-chevron-down text-[8px]"></i>
                    </div>
                    <div className="flex gap-4 text-base">
                        <i className="fa-regular fa-square-plus"></i>
                        <i className="fa-solid fa-bars"></i>
                    </div>
                </div>

                {/* Profile Meta */}
                <div className="px-4 pt-4">
                    <div className="flex items-center gap-6">
                        <div className="relative group">
                            <div className="w-16 h-16 rounded-full border border-slate-200 p-0.5 relative overflow-hidden bg-white">
                                <img src={profile.avatar} alt="Avatar" className="w-full h-full rounded-full object-cover" />
                                <label className="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer text-white text-[10px]">
                                    <i className="fa-solid fa-camera"></i>
                                    <input type="file" className="hidden" onChange={onAvatarChange} accept="image/*" />
                                </label>
                            </div>
                            <div className="absolute bottom-0 right-0 bg-[#05472A] border-2 border-[#f8f8f8] rounded-full w-5 h-5 flex items-center justify-center text-white text-[10px]">
                                <i className="fa-solid fa-plus"></i>
                            </div>
                        </div>
                        <div className="flex-1 flex justify-around">
                            <div className="text-center">
                                <div className="font-bold text-sm leading-tight">{profile.stats.posts}</div>
                                <div className="text-[10px] text-slate-500">Posts</div>
                            </div>
                            <div className="text-center">
                                <div className="font-bold text-sm leading-tight">{profile.stats.followers}</div>
                                <div className="text-[10px] text-slate-500">Followers</div>
                            </div>
                            <div className="text-center">
                                <div className="font-bold text-sm leading-tight">{profile.stats.following}</div>
                                <div className="text-[10px] text-slate-500">Following</div>
                            </div>
                        </div>
                    </div>
                    <div className="mt-3">
                        <div className="font-bold text-xs" contentEditable suppressContentEditableWarning onBlur={(e) => onUpdateProfile('fullName', e.currentTarget.innerText)}>{profile.fullName}</div>
                        <div className="text-[11px] whitespace-pre-wrap leading-tight mt-1 text-slate-700" contentEditable suppressContentEditableWarning onBlur={(e) => onUpdateProfile('bio', e.currentTarget.innerText)}>{profile.bio}</div>
                    </div>
                    <div className="flex gap-1.5 mt-4">
                        <button className="flex-1 bg-white border border-slate-200 hover:bg-slate-100 py-1 rounded-md text-[11px] font-bold transition-colors">Edit Profile</button>
                        <button className="flex-1 bg-white border border-slate-200 hover:bg-slate-100 py-1 rounded-md text-[11px] font-bold transition-colors">Share</button>
                    </div>
                </div>

                {/* Tabs */}
                <div className="flex mt-6 border-b border-slate-200">
                    <div className="flex-1 flex justify-center py-2 border-b-2 border-slate-900">
                        <i className="fa-solid fa-table-cells text-base text-slate-900"></i>
                    </div>
                    <div className="flex-1 flex justify-center py-2 text-slate-300"><i className="fa-solid fa-clapperboard text-base"></i></div>
                    <div className="flex-1 flex justify-center py-2 text-slate-300"><i className="fa-regular fa-id-badge text-base"></i></div>
                </div>

                {/* Grid */}
                <div className="grid grid-cols-3 gap-[1px] bg-slate-200">
                    {posts.map((post, idx) => (
                        <div key={post.id} className="relative aspect-[3/4] overflow-hidden group cursor-pointer bg-white" onClick={() => onPostClick(idx)}>
                            <img src={post.imageUrl} alt={`Post ${idx}`} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />
                            <div className="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center">
                                <label className="p-1.5 bg-[#f8f8f8] rounded-full mb-1 cursor-pointer">
                                    <i className="fa-solid fa-upload text-[#05472A] text-[10px]"></i>
                                    <input type="file" className="hidden" onChange={(e) => onPostChange(idx, e)} accept="image/*" />
                                </label>
                                <span className="text-[8px] text-white font-bold bg-[#05472A] px-1.5 py-0.5 rounded shadow">REPLACE</span>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const PostDetailPreview = ({ profile, post, onUpdatePost }) => (
            <div className="h-full flex flex-col bg-[#f8f8f8] overflow-y-auto preview-scroll text-slate-900">
                <div className="px-4 py-3 border-b border-slate-200 sticky top-0 bg-[#f8f8f8] z-10 flex items-center">
                    <i className="fa-solid fa-chevron-left text-base mr-6 cursor-pointer"></i>
                    <div className="font-bold text-[10px] uppercase tracking-wider text-slate-400">Post Insight</div>
                </div>
                <div className="flex items-center px-3 py-2 justify-between">
                    <div className="flex items-center gap-2">
                        <div className="w-8 h-8 rounded-full border border-slate-200 overflow-hidden bg-white">
                            <img src={profile.avatar} alt="Avatar" className="w-full h-full object-cover" />
                        </div>
                        <div>
                            <div className="text-[10px] font-bold leading-none">{profile.username}</div>
                            <div className="text-[9px] text-slate-500 leading-tight mt-0.5" contentEditable suppressContentEditableWarning onBlur={(e) => onUpdatePost({ location: e.currentTarget.innerText })}>{post.location}</div>
                        </div>
                    </div>
                    <i className="fa-solid fa-ellipsis text-slate-400 text-xs"></i>
                </div>
                <div className="w-full aspect-[3/4] bg-slate-200 overflow-hidden">
                    <img src={post.imageUrl} alt="Post detail" className="w-full h-full object-cover" />
                </div>
                <div className="px-3 py-3 flex items-center justify-between text-slate-900">
                    <div className="flex items-center gap-4 text-lg">
                        <i className="fa-regular fa-heart hover:text-[#05472A] cursor-pointer"></i>
                        <i className="fa-regular fa-comment hover:text-[#05472A] cursor-pointer"></i>
                        <i className="fa-regular fa-paper-plane hover:text-[#05472A] cursor-pointer"></i>
                    </div>
                    <i className="fa-regular fa-bookmark text-lg hover:text-[#05472A] cursor-pointer"></i>
                </div>
                <div className="px-3 pb-6">
                    <div className="text-[10px] font-bold mb-1">Liked by photography_fans and others</div>
                    <div className="text-[11px] leading-snug">
                        <span className="font-bold mr-1.5">{profile.username}</span>
                        <span contentEditable suppressContentEditableWarning onBlur={(e) => onUpdatePost({ caption: e.currentTarget.innerText })}>{post.caption}</span>
                    </div>
                </div>
                <div className="mt-auto border-t border-slate-200 flex items-center justify-around py-2 sticky bottom-0 bg-[#f8f8f8]">
                    <i className="fa-solid fa-house text-base text-slate-900"></i>
                    <i className="fa-solid fa-magnifying-glass text-base text-slate-300"></i>
                    <div className="w-6 h-6 rounded-full border border-slate-200 overflow-hidden bg-white">
                        <img src={profile.avatar} alt="mini" className="w-full h-full object-cover" />
                    </div>
                </div>
            </div>
        );

        // --- Main App ---

        const App = () => {
            const [profile, setProfile] = useState(INITIAL_PROFILE);
            const [posts, setPosts] = useState(INITIAL_POSTS);
            const [selectedIndex, setSelectedIndex] = useState(0);

            const updateProfile = (field, value) => setProfile(prev => ({ ...prev, [field]: value }));
            const updatePost = useCallback((index, updates) => {
                setPosts(prev => {
                    const newPosts = [...prev];
                    newPosts[index] = { ...newPosts[index], ...updates };
                    return newPosts;
                });
            }, []);

            const handleAvatarChange = (e) => {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (ev) => ev.target?.result && updateProfile('avatar', ev.target.result);
                    reader.readAsDataURL(e.target.files[0]);
                }
            };

            const handlePostChange = (index, e) => {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        if (ev.target?.result) {
                            updatePost(index, { imageUrl: ev.target.result });
                            setSelectedIndex(index);
                        }
                    };
                    reader.readAsDataURL(e.target.files[0]);
                }
            };

            return (
                <div className="min-h-screen bg-[#0A0A0A] text-[#f8f8f8] flex flex-col items-center justify-center p-4">
                    <header className="mb-8 text-center">
                        <h1 className="text-3xl font-bold tracking-tight text-[#f8f8f8]">Instagram Visualizer</h1>
                        <p className="text-[#05472A] mt-2 font-bold uppercase text-[10px] tracking-[0.4em]">9 Post Grid &bull; 3:4 Aspect Ratio</p>
                    </header>

                    <div className="w-full overflow-x-auto horizontal-container py-8 scroll-smooth">
                        <div className="flex flex-row gap-8 md:gap-16 items-start justify-center min-w-max px-8">
                            {/* Grid Frame */}
                            <div className="flex flex-col items-center">
                                <div className="phone-frame">
                                    <ProfilePreview 
                                        profile={profile} 
                                        posts={posts} 
                                        onAvatarChange={handleAvatarChange} 
                                        onPostClick={setSelectedIndex} 
                                        onPostChange={handlePostChange} 
                                        onUpdateProfile={updateProfile} 
                                    />
                                </div>
                                <div className="mt-4 text-[10px] text-white/30 uppercase tracking-[0.3em] font-black">Layout Grid</div>
                            </div>

                            {/* Detail Frame */}
                            <div className="flex flex-col items-center">
                                <div className="phone-frame">
                                    <PostDetailPreview 
                                        profile={profile} 
                                        post={posts[selectedIndex]} 
                                        onUpdatePost={(updates) => updatePost(selectedIndex, updates)} 
                                    />
                                </div>
                                <div className="mt-4 text-[10px] text-white/30 uppercase tracking-[0.3em] font-black">Layout Detail</div>
                            </div>
                        </div>
                    </div>

                    <footer className="mt-8 text-white/10 text-[9px] uppercase tracking-[0.6em] font-medium text-center">
                        Kumatkamit Lab &bull; v1.0.0
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

